{"version":3,"sources":["actions/index.js","functions/LoadFloorModel.js","components/FloorsModel.js","components/FloorsScene.js","data/floorsData.js","components/InfoWindow.js","App.js","serviceWorker.js","reducers/setClickedFloor.js","reducers/setClickedRoom.js","reducers/setWindowWidth.js","reducers/allReducers.js","index.js"],"names":["setClickedFloor","index","type","payload","setClickedRoom","LoadFloorModel","nodes","useLoader","GLTFLoader","floorBaseMesh","floor_base_1","geometry","floorSideMesh","floor_base_side_1","floorsNumbers","Array","fill","floorsRoomsNumbers","floorsRoomsMeshes","forEach","floor","floorIndex","roomsMeshes","room","roomIndex","roomMeshName","push","FloorsModel","windowWidth","clickedFloor","clickedRoom","onClickedFloorChange","onClickedRoomChange","buildingRef","useRef","floorRefs","materialRefs","roomRefs","sideRefs","useFrame","setMeshOpacity","opacity","current","roomRef","setMeshPosition","meshRef","indexDifference","floorGap","undefined","floorPosition","position","y","animationSpeed","rotation","ref","meshOpacity","useState","hoveredFloor","setHoveredFloor","hoveredRoom","setHoveredRoom","hoveredOnFloor","mouseInside","clickedOnFloor","clickedOnRoom","event","stopPropagation","hoveredOnRoom","convertDegreesToRadians","x","z","degrees","map","degree","Math","PI","floorObjects","floorObject","key","e","dispose","onPointerOver","onPointerOut","intersections","length","onClick","attach","transparent","color","floorRoom","extend","OrbitControls","softShadows","CameraControls","useThree","camera","domElement","gl","controls","state","update","minDistance","maxDistance","args","mapDispatchToProps","connect","setWindowWidth","className","colorManagement","shadowMap","fov","intensity","fallback","floorsData","description","rooms","name","floorText","setFloorText","roomText","setRoomText","useEffect","style","transform","icon","faTimes","width","handleResize","window","innerWidth","addEventListener","_","removeEventListener","Boolean","location","hostname","match","initialState","action","clickCount","combineReducers","store","createStore","reducers","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"sOAAaA,EAAkB,SAACC,GAC9B,MAAO,CACLC,KAAM,oBACNC,QAASF,IAIAG,EAAiB,SAACH,GAC7B,MAAO,CACLC,KAAM,mBACNC,QAASF,I,uCCiBEI,MAxBf,WAA2B,IACjBC,EAAUC,YAAUC,IAAY,sBAAhCF,MAEFG,EAAgBH,EAAMI,aAAaC,SACnCC,EAAgBN,EAAMO,kBAAkBF,SAExCG,EAAgBC,MAAM,GAAGC,KAAK,GAE9BC,EAAqB,CAAC,EAAG,EAAG,EAAG,EAAG,GAEpCC,EAAoB,GAWxB,OATAJ,EAAcK,SAAQ,SAACC,EAAOC,GAC5B,IAAIC,EAAcP,MAAME,EAAmBI,IAAaL,KAAK,GAC7DM,EAAYH,SAAQ,SAACI,EAAMC,GACzB,IAAIC,EAAY,eAAWJ,EAAa,EAAxB,iBAAkCG,EAAY,EAA9C,MAChBF,EAAYE,GAAalB,EAAMmB,GAAcd,YAE/CO,EAAkBQ,KAAKJ,MAGlB,CAACb,EAAeG,EAAeM,IC0JzBS,EA7KK,SAAC,GAA2F,IAAzFC,EAAwF,EAAxFA,YAAaC,EAA2E,EAA3EA,aAAcC,EAA6D,EAA7DA,YAAaC,EAAgD,EAAhDA,qBAAsBC,EAA0B,EAA1BA,oBAA0B,EACnD3B,IADmD,mBACtGI,EADsG,KACvFG,EADuF,KACxEM,EADwE,KAGvGe,EAAcC,mBACdC,EAAYD,iBAAO,IACnBE,EAAeF,iBAAO,IACtBG,EAAWH,iBAAO,CAAC,GAAI,GAAI,GAAI,GAAI,KACnCI,EAAWJ,iBAAO,IAGxBK,aAAS,WACP,IAAMC,EAAiB,SAACC,EAASxC,GAC/BmC,EAAaM,QAAQzC,GAAOwC,QAAUA,EACtCH,EAASI,QAAQzC,GAAOwC,QAAUA,EAClCJ,EAASK,QAAQzC,GAAOkB,SAAQ,SAACwB,GAC/BA,EAAQF,QAAUA,MAIhBG,EAAkB,SAACC,EAASxB,EAAYyB,GAC5C,IAAIC,EAAW,OACSC,IAApBF,IACFC,EAA6B,GAAlBD,GAEb,IAAIG,EAhBc,GAgBE5B,EAA6B0B,EAE7CF,EAAQK,SAASC,EAAIF,GACnBH,EAAkB,QAAyBE,IAApBF,KACzBD,EAAQK,SAASC,GAAKC,GAEfP,EAAQK,SAASC,EAAIF,IAC1BH,EAAkB,QAAyBE,IAApBF,KACzBD,EAAQK,SAASC,GAAKC,IAKtBA,EAAiB,EACvBnB,EAAYS,QAAQW,SAASF,GAAK,KAClChB,EAAUO,QAAQvB,SAAQ,SAACmC,EAAKrD,GAC9B,IAAIsD,EAAc,EAClB,GAAqB,OAAjB1B,EAAuB,CACzB,IAAIiB,EAAkBjB,EAAe5B,EACrCsD,EAAc,GACV1B,IAAiB5B,GACnBuC,EAAee,EAAatD,GAE9B2C,EAAgBU,EAAKrD,EAAO6C,QAE5BN,EAAee,EAAatD,GAC5B2C,EAAgBU,EAAKrD,SAlDkF,MAuDrEuD,mBAAS,MAvD4D,mBAuDtGC,EAvDsG,KAuDxFC,EAvDwF,OAwDvEF,mBAAS,MAxD8D,mBAwDtGG,EAxDsG,KAwDzFC,EAxDyF,KA0DvGC,EAAiB,SAAC5D,EAAO6D,GACR,OAAjBjC,EACEiC,EACFJ,EAAgBzD,GACPwD,IAAiBxD,GAC1ByD,EAAgB,MAGlBA,EAAgB,OAIdK,EAAiB,SAAC9D,GACD,OAAjB4B,GACFE,EAAqB9B,IAInB+D,EAAgB,SAAC/D,EAAOgE,GACP,OAAjBpC,IACFoC,EAAMC,kBACNlC,EAAoB/B,KAIlBkE,EAAgB,SAAC9C,EAAYG,EAAWsC,EAAaG,GACpC,OAAjBpC,GAAyBA,IAAiBR,IAC5C4C,EAAMC,kBACFJ,EACFF,EAAepC,GACNmC,IAAgBnC,GACzBoC,EAAe,QAKfQ,EAA0B,SAACC,EAAGlB,EAAGmB,GACrC,IAAIC,EAAU,CAACF,EAAGlB,EAAGmB,GACrB,OAAkBC,EAAQC,KAAI,SAACC,GAAD,OAAYA,GAAUC,KAAKC,GAAK,SAG1DC,EAAe7D,MAAM,GAAGC,KAAK,GACnC,OACE,2BAAOsC,IAAKrB,EAAaiB,SAAU,CAAC,GAAI,GAAI,IACzC0B,EAAaJ,KAAI,SAACK,EAAaxD,GAAd,OAChB,2BAAOyD,IAAKzD,EAAYiC,IAAK,SAACyB,GAAD,OAAQ5C,EAAUO,QAAQrB,GAAc0D,GAAI1B,SAAUe,EAAwB,GAAI,IAAK,IAClH,0BACEY,QAAS,KACTC,cAAe,SAACF,GACdA,EAAEb,kBACFL,EAAexC,GAAY,GACvBO,GAAe,MACjBmC,EAAe1C,IAGnB6D,aAAc,SAACH,GACbA,EAAEI,cAAcC,QAAUvB,EAAexC,GAAY,IAEvDgE,QAAS,SAACN,GACRA,EAAEb,kBACFH,EAAe1C,IAEjBV,SAAUF,GAEV,0CACE6E,OAAO,WACPhC,IAAK,SAACyB,GAAD,OAAQ3C,EAAaM,QAAQrB,GAAc0D,GAChDQ,aAAa,EACbC,MAAO,WAGX,0BAAM7E,SAAUC,GACd,0CACE0E,OAAO,WACPhC,IAAK,SAACyB,GAAD,OAAQzC,EAASI,QAAQrB,GAAc0D,GAC5CQ,aAAa,EACbC,MAAO/B,IAAiBpC,EAAa,UAAY,UAGpDH,EAAkBG,GAAYmD,KAAI,SAACiB,EAAWjE,GAAZ,OACjC,2BAAOsD,IAAKtD,GACV,0BACEb,SAAU8E,EACVR,cAAe,SAACF,GACdZ,EAAc9C,EAAYG,GAAW,EAAMuD,GACvCnD,GAAe,MACjBoC,EAAcxC,EAAWuD,IAG7BG,aAAc,SAACH,GACbZ,EAAc9C,EAAYG,GAAW,EAAOuD,IAE9CM,QAAS,SAACN,GACRf,EAAcxC,EAAWuD,KAG3B,0CACEO,OAAO,WACPhC,IAAK,SAACyB,GAAD,OAAQ1C,EAASK,QAAQrB,GAAYG,GAAauD,GACvDQ,aAAa,EACbC,MACG3D,IAAiBR,GAAcsC,IAAgBnC,GAAeK,IAAiBR,GAAcS,IAAgBN,EAC1G,SACA,uBC9JxBkE,YAAO,CAAEC,oBACTC,cAEA,IAAMC,EAAiB,SAAC,GAAqB,IAAnBjE,EAAkB,EAAlBA,YAAkB,EAItCkE,cAFFC,EAFwC,EAExCA,OACMC,EAHkC,EAGxCC,GAAMD,WAEFE,EAAWhE,mBACjBK,aAAS,SAAC4D,GAAD,OAAWD,EAASxD,QAAQ0D,YACrC,IAAIC,EAAc,IACdC,EAAc,IAKlB,OAJI1E,EAAc,MAChByE,EAAc,IACdC,EAAc,KAET,mCAAehD,IAAK4C,EAAUK,KAAM,CAACR,EAAQC,GAAaK,YAAaA,EAAaC,YAAaA,KAkC1G,IAQME,EAAqB,CACzBxG,kBACAI,kBAGaqG,eAbS,SAACN,GACvB,MAAO,CACLtE,aAAcsE,EAAMnG,gBAAgB6B,aACpCC,YAAaqE,EAAM/F,eAAe0B,YAClCF,YAAauE,EAAMO,eAAe9E,eASE4E,EAAzBC,EA5Cf,YAAmG,IAA5E7E,EAA2E,EAA3EA,YAAaC,EAA8D,EAA9DA,aAAcC,EAAgD,EAAhDA,YAAa9B,EAAmC,EAAnCA,gBAAiBI,EAAkB,EAAlBA,eAS9E,OACE,yBAAKuG,UAAU,yBACb,kBAAC,IAAD,CAAQC,iBAAe,EAACC,WAAS,EAACd,OAAQ,CAAE7C,SAAU,CAAC,IAAK,KAAM,KAAM4D,IAAK,KAC3E,kBAAC,EAAD,CAAgBlF,YAAaA,IAC7B,kCAAcmF,UAAW,KACzB,gCAAY7D,SAAU,EAAE,GAAI,KAAM,IAAK6D,UAAW,KAClD,+BACE,kBAAC,WAAD,CAAUC,SAAU,MAClB,kBAAC,EAAD,CACEjF,qBAjBe,SAAC9B,GAC1BD,EAAgBC,IAiBN+B,oBAdc,SAAC/B,GACzBG,EAAeH,IAcL4B,aAAcA,EACdC,YAAaA,EACbF,YAAaA,W,gBC8FZqF,EA/II,CACjB,CACEC,YAAa,uBACbC,MAAO,CACL,CACEC,KAAM,kBACNF,YACE,gMAEJ,CACEE,KAAM,2BACNF,YACE,wIAEJ,CACEE,KAAM,2BACNF,YACE,oSAEJ,CACEE,KAAM,qBACNF,YACE,mUAEJ,CACEE,KAAM,sBACNF,YACE,4MAEJ,CACEE,KAAM,yBACNF,YACE,mPAIR,CACEA,YAAa,wBACbC,MAAO,CACL,CACEC,KAAM,yBACNF,YACE,4TAEJ,CACEE,KAAM,0BACNF,YACE,mSAEJ,CACEE,KAAM,6BACNF,YACE,uMAEJ,CACEE,KAAM,iBACNF,YACE,oWAIR,CACEA,YAAa,oBACbC,MAAO,CACL,CACEC,KAAM,uBACNF,YAAa,sGAEf,CACEE,KAAM,mCACNF,YACE,oPAEJ,CACEE,KAAM,uBACNF,YACE,+MAEJ,CACEE,KAAM,wBACNF,YACE,uNAEJ,CACEE,KAAM,wBACNF,YACE,oNAIR,CACEA,YAAa,mBACbC,MAAO,CACL,CACEC,KAAM,mBACNF,YACE,+LAEJ,CACEE,KAAM,+BACNF,YAAa,2GAEf,CACEE,KAAM,oBACNF,YAAa,mHAEf,CACEE,KAAM,8BACNF,YAAa,mHAInB,CACEA,YAAa,yBACbC,MAAO,CACL,CACEC,KAAM,4BACNF,YACE,0KAEJ,CACEE,KAAM,0BACNF,YAAa,qFAEf,CACEE,KAAM,yBACNF,YACE,kPAEJ,CACEE,KAAM,eACNF,YACE,6MAEJ,CACEE,KAAM,sBACNF,YACE,yNClFV,IAOMV,EAAqB,CACzBxG,kBACAI,kBAGaqG,eAZS,SAACN,GACvB,MAAO,CACLtE,aAAcsE,EAAMnG,gBAAgB6B,aACpCC,YAAaqE,EAAM/F,eAAe0B,eASE0E,EAAzBC,EA1Df,YAAqF,IAA/D5E,EAA8D,EAA9DA,aAAcC,EAAgD,EAAhDA,YAAa9B,EAAmC,EAAnCA,gBAAiBI,EAAkB,EAAlBA,eAAkB,EAChDoD,mBAAS,IADuC,mBAC3E6D,EAD2E,KAChEC,EADgE,OAElD9D,mBAAS,CAAE4D,KAAM,GAAIF,YAAa,KAFgB,mBAE3EK,EAF2E,KAEjEC,EAFiE,KAalF,OATAC,qBAAU,WACa,OAAjB5F,GACFyF,EAAaL,EAAWpF,GAAcqF,aAEpB,OAAhBpF,GACF0F,EAAYP,EAAWpF,GAAcsF,MAAMrF,MAE5C,CAACD,EAAcC,IAGhB,yBAAK6E,UAAU,eACb,yBACEA,UAAU,4BACVe,MAAO,CAAEC,UAA4B,OAAjB9F,EAAwB,sBAAwB,kBAAmBY,QAA0B,OAAjBZ,EAAwB,EAAI,IAE5H,yBAAK8E,UAAU,kBACb,4CAAc9E,EAAe,EAA7B,MACA,sCAAQwF,KAEV,yBACEV,UAAU,gBACVtB,QAAS,WACPrF,EAAgB,MAChBI,EAAe,QAGjB,kBAAC,IAAD,CAAiBwH,KAAMC,IAASlB,UAAU,WAG9C,yBACEA,UAAU,2BACVe,MAAO,CAAEC,UAA2B,OAAhB7F,EAAuB,sBAAwB,kBAAmBW,QAAyB,OAAhBX,EAAuB,EAAI,IAE1H,yBAAK6E,UAAU,kBACb,4BAAKY,EAASH,MACd,2BAAIG,EAASL,mBClBvB,IAAMV,EAAqB,CACzBE,eNjB4B,SAACoB,GAC7B,MAAO,CACL5H,KAAM,mBACNC,QAAS2H,KMiBErB,cAAQ,KAAMD,EAAdC,EA1Bf,YAAkC,IAAnBC,EAAkB,EAAlBA,eAcb,OAbAe,qBAAU,WACR,SAASM,IACPrB,EAAesB,OAAOC,YAMxB,OAJAD,OAAOE,iBAAiB,SAAUH,GAElCA,IAEO,SAACI,GACNH,OAAOI,oBAAoB,SAAUL,OAKvC,yBAAKpB,UAAU,mBACb,kBAAC,EAAD,MACA,kBAAC,EAAD,UCbc0B,QACW,cAA7BL,OAAOM,SAASC,UAEe,UAA7BP,OAAOM,SAASC,UAEhBP,OAAOM,SAASC,SAASC,MACvB,2D,oBClBAC,EAAe,CACnB5G,aAAc,MAYD7B,EATS,WAAmC,IAAlCmG,EAAiC,uDAAzBsC,EAAcC,EAAW,uCACxD,OAAQA,EAAOxI,MACb,IAAK,oBACH,OAAO,2BAAKiG,GAAZ,IAAmBtE,aAAc6G,EAAOvI,UAC1C,QACE,OAAOgG,ICTPsC,EAAe,CACnB3G,YAAa,KACb6G,WAAY,GAYCvI,EATQ,WAAmC,IAAlC+F,EAAiC,uDAAzBsC,EAAcC,EAAW,uCACvD,OAAQA,EAAOxI,MACb,IAAK,mBACH,OAAO,2BAAKiG,GAAZ,IAAmBrE,YAAa4G,EAAOvI,QAASwI,WAAYxC,EAAMwC,WAAa,IACjF,QACE,OAAOxC,ICVPsC,EAAe,CACnB7G,YAAa,GAYA8E,EATQ,WAAmC,IAAlCP,EAAiC,uDAAzBsC,EAAcC,EAAW,uCACvD,OAAQA,EAAOxI,MACb,IAAK,mBACH,OAAO,2BAAKiG,GAAZ,IAAmBvE,YAAa8G,EAAOvI,UACzC,QACE,OAAOgG,ICJEyC,cAAgB,CAC7B5I,gBAAiBA,EACjBI,eAAgBA,EAChBsG,eAAgBA,ICEZmC,EAAQC,YAAYC,GAE1BC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,EAAD,QAGJM,SAASC,eAAe,SLiHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAME,c","file":"static/js/main.1e32e6e1.chunk.js","sourcesContent":["export const setClickedFloor = (index) => {\r\n  return {\r\n    type: \"SET_CLICKED_FLOOR\",\r\n    payload: index\r\n  };\r\n};\r\n\r\nexport const setClickedRoom = (index) => {\r\n  return {\r\n    type: \"SET_CLICKED_ROOM\",\r\n    payload: index\r\n  };\r\n};\r\n\r\nexport const setWindowWidth = (width) => {\r\n  return {\r\n    type: \"SET_WINDOW_WIDTH\",\r\n    payload: width\r\n  };\r\n};\r\n","import { useLoader } from \"react-three-fiber\";\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\n\r\nfunction LoadFloorModel() {\r\n  const { nodes } = useLoader(GLTFLoader, \"./models/floor.glb\");\r\n\r\n  const floorBaseMesh = nodes.floor_base_1.geometry;\r\n  const floorSideMesh = nodes.floor_base_side_1.geometry;\r\n\r\n  const floorsNumbers = Array(5).fill(0);\r\n\r\n  const floorsRoomsNumbers = [6, 4, 5, 4, 5];\r\n\r\n  let floorsRoomsMeshes = [];\r\n\r\n  floorsNumbers.forEach((floor, floorIndex) => {\r\n    let roomsMeshes = Array(floorsRoomsNumbers[floorIndex]).fill(0);\r\n    roomsMeshes.forEach((room, roomIndex) => {\r\n      let roomMeshName = `floor${floorIndex + 1}_room_${roomIndex + 1}_1`;\r\n      roomsMeshes[roomIndex] = nodes[roomMeshName].geometry;\r\n    });\r\n    floorsRoomsMeshes.push(roomsMeshes);\r\n  });\r\n\r\n  return [floorBaseMesh, floorSideMesh, floorsRoomsMeshes];\r\n}\r\n\r\nexport default LoadFloorModel;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { useFrame } from \"react-three-fiber\";\r\n\r\nimport LoadFloorModel from \"../functions/LoadFloorModel\";\r\n\r\nconst FloorsModel = ({ windowWidth, clickedFloor, clickedRoom, onClickedFloorChange, onClickedRoomChange }) => {\r\n  const [floorBaseMesh, floorSideMesh, floorsRoomsMeshes] = LoadFloorModel();\r\n\r\n  const buildingRef = useRef();\r\n  const floorRefs = useRef([]);\r\n  const materialRefs = useRef([]);\r\n  const roomRefs = useRef([[], [], [], [], []]);\r\n  const sideRefs = useRef([]);\r\n  const floorDistance = 10;\r\n\r\n  useFrame(() => {\r\n    const setMeshOpacity = (opacity, index) => {\r\n      materialRefs.current[index].opacity = opacity;\r\n      sideRefs.current[index].opacity = opacity;\r\n      roomRefs.current[index].forEach((roomRef) => {\r\n        roomRef.opacity = opacity;\r\n      });\r\n    };\r\n\r\n    const setMeshPosition = (meshRef, floorIndex, indexDifference) => {\r\n      let floorGap = 0;\r\n      if (indexDifference !== undefined) {\r\n        floorGap = indexDifference * 30;\r\n      }\r\n      let floorPosition = floorIndex * floorDistance - floorGap;\r\n\r\n      if (meshRef.position.y > floorPosition) {\r\n        if (indexDifference > 0 || indexDifference === undefined) {\r\n          meshRef.position.y -= animationSpeed;\r\n        }\r\n      } else if (meshRef.position.y < floorPosition) {\r\n        if (indexDifference < 0 || indexDifference === undefined) {\r\n          meshRef.position.y += animationSpeed;\r\n        }\r\n      }\r\n    };\r\n\r\n    const animationSpeed = 2;\r\n    buildingRef.current.rotation.y += 0.001;\r\n    floorRefs.current.forEach((ref, index) => {\r\n      let meshOpacity = 1;\r\n      if (clickedFloor !== null) {\r\n        let indexDifference = clickedFloor - index;\r\n        meshOpacity = 0.2;\r\n        if (clickedFloor !== index) {\r\n          setMeshOpacity(meshOpacity, index);\r\n        }\r\n        setMeshPosition(ref, index, indexDifference);\r\n      } else {\r\n        setMeshOpacity(meshOpacity, index);\r\n        setMeshPosition(ref, index);\r\n      }\r\n    });\r\n  });\r\n\r\n  const [hoveredFloor, setHoveredFloor] = useState(null);\r\n  const [hoveredRoom, setHoveredRoom] = useState(null);\r\n\r\n  const hoveredOnFloor = (index, mouseInside) => {\r\n    if (clickedFloor === null) {\r\n      if (mouseInside) {\r\n        setHoveredFloor(index);\r\n      } else if (hoveredFloor === index) {\r\n        setHoveredFloor(null);\r\n      }\r\n    } else {\r\n      setHoveredFloor(null);\r\n    }\r\n  };\r\n\r\n  const clickedOnFloor = (index) => {\r\n    if (clickedFloor === null) {\r\n      onClickedFloorChange(index);\r\n    }\r\n  };\r\n\r\n  const clickedOnRoom = (index, event) => {\r\n    if (clickedFloor !== null) {\r\n      event.stopPropagation();\r\n      onClickedRoomChange(index);\r\n    }\r\n  };\r\n\r\n  const hoveredOnRoom = (floorIndex, roomIndex, mouseInside, event) => {\r\n    if (clickedFloor !== null && clickedFloor === floorIndex) {\r\n      event.stopPropagation();\r\n      if (mouseInside) {\r\n        setHoveredRoom(roomIndex);\r\n      } else if (hoveredRoom === roomIndex) {\r\n        setHoveredRoom(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const convertDegreesToRadians = (x, y, z) => {\r\n    let degrees = [x, y, z];\r\n    return (degrees = degrees.map((degree) => degree * (Math.PI / 180)));\r\n  };\r\n\r\n  const floorObjects = Array(5).fill(0);\r\n  return (\r\n    <group ref={buildingRef} position={[0, -20, 0]}>\r\n      {floorObjects.map((floorObject, floorIndex) => (\r\n        <group key={floorIndex} ref={(e) => (floorRefs.current[floorIndex] = e)} rotation={convertDegreesToRadians(90, 180, 0)}>\r\n          <mesh\r\n            dispose={null}\r\n            onPointerOver={(e) => {\r\n              e.stopPropagation();\r\n              hoveredOnFloor(floorIndex, true);\r\n              if (windowWidth <= 1024) {\r\n                clickedOnFloor(floorIndex);\r\n              }\r\n            }}\r\n            onPointerOut={(e) => {\r\n              e.intersections.length && hoveredOnFloor(floorIndex, false);\r\n            }}\r\n            onClick={(e) => {\r\n              e.stopPropagation();\r\n              clickedOnFloor(floorIndex);\r\n            }}\r\n            geometry={floorBaseMesh}\r\n          >\r\n            <meshStandardMaterial\r\n              attach=\"material\"\r\n              ref={(e) => (materialRefs.current[floorIndex] = e)}\r\n              transparent={true}\r\n              color={\"white\"}\r\n            />\r\n          </mesh>\r\n          <mesh geometry={floorSideMesh}>\r\n            <meshStandardMaterial\r\n              attach=\"material\"\r\n              ref={(e) => (sideRefs.current[floorIndex] = e)}\r\n              transparent={true}\r\n              color={hoveredFloor === floorIndex ? \"#00FBFF\" : \"grey\"}\r\n            />\r\n          </mesh>\r\n          {floorsRoomsMeshes[floorIndex].map((floorRoom, roomIndex) => (\r\n            <group key={roomIndex}>\r\n              <mesh\r\n                geometry={floorRoom}\r\n                onPointerOver={(e) => {\r\n                  hoveredOnRoom(floorIndex, roomIndex, true, e);\r\n                  if (windowWidth <= 1024) {\r\n                    clickedOnRoom(roomIndex, e);\r\n                  }\r\n                }}\r\n                onPointerOut={(e) => {\r\n                  hoveredOnRoom(floorIndex, roomIndex, false, e);\r\n                }}\r\n                onClick={(e) => {\r\n                  clickedOnRoom(roomIndex, e);\r\n                }}\r\n              >\r\n                <meshStandardMaterial\r\n                  attach=\"material\"\r\n                  ref={(e) => (roomRefs.current[floorIndex][roomIndex] = e)}\r\n                  transparent={true}\r\n                  color={\r\n                    (clickedFloor === floorIndex && hoveredRoom === roomIndex) || (clickedFloor === floorIndex && clickedRoom === roomIndex)\r\n                      ? \"yellow\"\r\n                      : \"#E3E3E3\"\r\n                  }\r\n                />\r\n              </mesh>\r\n            </group>\r\n          ))}\r\n        </group>\r\n      ))}\r\n    </group>\r\n  );\r\n};\r\n\r\nexport default FloorsModel;\r\n","import React, { useRef, Suspense } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setClickedFloor, setClickedRoom } from \"../actions\";\r\nimport { Canvas, useFrame, useThree, extend } from \"react-three-fiber\";\r\nimport { softShadows } from \"drei\";\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\nimport FloorsModel from \"./FloorsModel\";\r\n\r\nextend({ OrbitControls });\r\nsoftShadows();\r\n\r\nconst CameraControls = ({ windowWidth }) => {\r\n  const {\r\n    camera,\r\n    gl: { domElement }\r\n  } = useThree();\r\n  const controls = useRef();\r\n  useFrame((state) => controls.current.update());\r\n  let minDistance = 150;\r\n  let maxDistance = 350;\r\n  if (windowWidth < 450) {\r\n    minDistance = 350;\r\n    maxDistance = 650;\r\n  }\r\n  return <orbitControls ref={controls} args={[camera, domElement]} minDistance={minDistance} maxDistance={maxDistance} />;\r\n};\r\n\r\nfunction FloorsScene({ windowWidth, clickedFloor, clickedRoom, setClickedFloor, setClickedRoom }) {\r\n  const clickedFloorChange = (index) => {\r\n    setClickedFloor(index);\r\n  };\r\n\r\n  const clickedRoomChange = (index) => {\r\n    setClickedRoom(index);\r\n  };\r\n\r\n  return (\r\n    <div className=\"floor-scene-container\">\r\n      <Canvas colorManagement shadowMap camera={{ position: [160, 120, -140], fov: 30 }}>\r\n        <CameraControls windowWidth={windowWidth} />\r\n        <ambientLight intensity={0.6} />\r\n        <pointLight position={[-10, 100, -20]} intensity={0.5} />\r\n        <group>\r\n          <Suspense fallback={null}>\r\n            <FloorsModel\r\n              onClickedFloorChange={clickedFloorChange}\r\n              onClickedRoomChange={clickedRoomChange}\r\n              clickedFloor={clickedFloor}\r\n              clickedRoom={clickedRoom}\r\n              windowWidth={windowWidth}\r\n            />\r\n          </Suspense>\r\n        </group>\r\n      </Canvas>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    clickedFloor: state.setClickedFloor.clickedFloor,\r\n    clickedRoom: state.setClickedRoom.clickedRoom,\r\n    windowWidth: state.setWindowWidth.windowWidth\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setClickedFloor,\r\n  setClickedRoom\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FloorsScene);\r\n","const floorsData = [\r\n  {\r\n    description: \"Classroom facilities\",\r\n    rooms: [\r\n      {\r\n        name: \"110 - Classroom\",\r\n        description:\r\n          \"A room used by regularly scheduled classes that does not require special-purpose equipment and which commonly is used by more than one discipline. These classrooms are centrally scheduled.\"\r\n      },\r\n      {\r\n        name: \"111 - Assigned Classroom\",\r\n        description:\r\n          \"Assigned Classroom: A room with standard classroom furniture and equipment that is scheduled by a department or other academic unit.\"\r\n      },\r\n      {\r\n        name: \"112 - Computer Classroom\",\r\n        description:\r\n          \"A classroom with a computer at every student station as well as the instructor station configured so that each station can see the instructional display screen simultaneously with their own desktop screen. Computer classrooms are locked for security when not in use for scheduled courses.\"\r\n      },\r\n      {\r\n        name: \"115 - Computer Lab\",\r\n        description:\r\n          \"A space intended to provide students access to computers for individual or group work on a non-scheduled (drop-in) or event-scheduled basis. While computer labs may be used for some scheduled course instruction, the room and its resources must be accessible for other individual or instructional use at non-class times.\"\r\n      },\r\n      {\r\n        name: \"116 - Breakout Room\",\r\n        description:\r\n          \"A room used by regularly scheduled classes as an adjunct to the primary classroom for small group discussion/active learning activities occurring during the regularly scheduled meeting for the course.\"\r\n      },\r\n      {\r\n        name: \"140 - Remote Classroom\",\r\n        description:\r\n          \"A room with standard classroom furniture and equipment that is typically scheduled by a department or other academic unit due to its location off the main Seattle, Bothell or Tacoma campuses which restricts its use in general scheduling.\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    description: \"Labaratory facilities\",\r\n    rooms: [\r\n      {\r\n        name: \"210 - Class Laboratory\",\r\n        description:\r\n          \"A specially designed or equipped room used primarily for group instruction in regularly scheduled classes that requires special-purpose equipment for student participation, experimentation, observation, or practice in a particular field of study. These rooms are scheduled by a department or other academic unit.\"\r\n      },\r\n      {\r\n        name: \"211 - General Class Lab\",\r\n        description:\r\n          \"A specially designed or equipped room used primarily for group instruction in regularly scheduled classes that requires special-purpose equipment for student participation, experimentation, observation, or practice in several related fields of study. These rooms are centrally scheduled.\"\r\n      },\r\n      {\r\n        name: \"212 - Restricted Class Lab\",\r\n        description:\r\n          \"A specially designed or equipped room used for group instruction but restricted to a small number of courses by project work in progress, by the nature of equipment and materials, or by location.\"\r\n      },\r\n      {\r\n        name: \"220 - Open Lab\",\r\n        description:\r\n          \" A space intended to provide students access to specialized equipment (excluding computers) for individual or group work on a non-scheduled (drop-in) or event-scheduled basis. While open labs may be used for some scheduled course instruction, the room and its resources must be accessible for other individual or instructional use at non-class times.\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    description: \"Office facilities\",\r\n    rooms: [\r\n      {\r\n        name: \"311 - Faculty Office\",\r\n        description: \"A room used by instructional and research faculty in an office (i.e., working at a desk or table).\"\r\n      },\r\n      {\r\n        name: \"312 - Dean/Chair/Director Office\",\r\n        description:\r\n          \"A room used by personnel engaged in the planning, management and operation of the academic and/or business affairs of the institution, college or department, including offices of the dean, chairpersons, central administration and directors.\"\r\n      },\r\n      {\r\n        name: \"313 - Student Office\",\r\n        description:\r\n          \"A room used by students (working at a desk or table), Including teaching and research assistants, trainees, student activity assistants, counseling assistants, curator assistant, non-medical intern, etc.\"\r\n      },\r\n      {\r\n        name: \"314 - Clerical Office\",\r\n        description:\r\n          \"A room used primarily by secretarial and clerical staff (working at a desk or table), as well as general office space where files, office machines, or reception space is in the same room with clerical personnel.\"\r\n      },\r\n      {\r\n        name: \"316 - Prostaff Office\",\r\n        description:\r\n          \"A room used by academic or administrative staff, other than directors of units, including offices of accountants, architects, assistants to directors, coordinators, graphic artists, advisors, managers, etc.\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    description: \"Study facilities\",\r\n    rooms: [\r\n      {\r\n        name: \"410 - Study Room\",\r\n        description:\r\n          \"A room located in a campus library used by individuals to study books or audio-visual materials, including reading rooms, carrels, study booths, etc., intended for general study purposes.\"\r\n      },\r\n      {\r\n        name: \"412 - Non-Library Study Room\",\r\n        description: \"A room located in areas, not assigned to libraries, that individuals use to study at their convenience.\"\r\n      },\r\n      {\r\n        name: \"420 - Collections\",\r\n        description: \"A room or portion of a room in a campus library used to provide shelving for library or audio-visual materials.\"\r\n      },\r\n      {\r\n        name: \"430 - Open-Stack Study Room\",\r\n        description: \"A combination study space and stack, generally without physical boundaries between the stack and study areas.\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    description: \"Special-use facilities\",\r\n    rooms: [\r\n      {\r\n        name: \"520 - Athletic Facilities\",\r\n        description:\r\n          \"A room or area used by students, staff, or the public for athletic activities, including gymnasiums, ball courts, wrestling rooms, indoor tracks, swimming pools, etc.\"\r\n      },\r\n      {\r\n        name: \"523 - Spectator Seating\",\r\n        description: \"The seating area used by students, staff, or the public to watch athletic events.\"\r\n      },\r\n      {\r\n        name: \"530 - Media Production\",\r\n        description:\r\n          \"A room or group of rooms used for the production and distribution of audio/visual, radio and television materials for the operation of equipment for communication of these materials, including sound and graphics studios and similar rooms.\"\r\n      },\r\n      {\r\n        name: \"540 - Clinic\",\r\n        description:\r\n          \" A room used for the diagnosis and/or treatment of patients in a program other than medicine, dentistry, and student health care; includes psychology, speech and hearing, remedial reading clinics, etc.\"\r\n      },\r\n      {\r\n        name: \"550 - Demonstration\",\r\n        description:\r\n          \"A room or group of rooms used to practice the principles of certain disciplines of teaching, including demonstration schools and preschool nurseries if they support the training of college students as teachers.\"\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nexport default floorsData;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setClickedFloor, setClickedRoom } from \"../actions\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport floorsData from \"../data/floorsData\";\r\n\r\nfunction InfoWindow({ clickedFloor, clickedRoom, setClickedFloor, setClickedRoom }) {\r\n  const [floorText, setFloorText] = useState(\"\");\r\n  const [roomText, setRoomText] = useState({ name: \"\", description: \"\" });\r\n\r\n  useEffect(() => {\r\n    if (clickedFloor !== null) {\r\n      setFloorText(floorsData[clickedFloor].description);\r\n    }\r\n    if (clickedRoom !== null) {\r\n      setRoomText(floorsData[clickedFloor].rooms[clickedRoom]);\r\n    }\r\n  }, [clickedFloor, clickedRoom]);\r\n\r\n  return (\r\n    <div className=\"info-window\">\r\n      <div\r\n        className=\"floor-container container\"\r\n        style={{ transform: clickedFloor !== null ? \"translate(-100%, 0)\" : \"translate(0, 0)\", opacity: clickedFloor !== null ? 1 : 0 }}\r\n      >\r\n        <div className=\"text-container\">\r\n          <h1>{`Floor ${clickedFloor + 1}:`}</h1>\r\n          <h1>{`${floorText}`}</h1>\r\n        </div>\r\n        <div\r\n          className=\"btn btn-close\"\r\n          onClick={() => {\r\n            setClickedFloor(null);\r\n            setClickedRoom(null);\r\n          }}\r\n        >\r\n          <FontAwesomeIcon icon={faTimes} className=\"icon\" />\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"room-container container\"\r\n        style={{ transform: clickedRoom !== null ? \"translate(-100%, 0)\" : \"translate(0, 0)\", opacity: clickedRoom !== null ? 1 : 0 }}\r\n      >\r\n        <div className=\"text-container\">\r\n          <h1>{roomText.name}</h1>\r\n          <p>{roomText.description}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    clickedFloor: state.setClickedFloor.clickedFloor,\r\n    clickedRoom: state.setClickedRoom.clickedRoom\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  setClickedFloor,\r\n  setClickedRoom\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InfoWindow);\r\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport FloorsScene from \"./components/FloorsScene\";\nimport InfoWindow from \"./components/InfoWindow\";\nimport { setWindowWidth } from \"./actions\";\n\n//\"homepage\": \"//https://robertasliekis.github.io/3d-floors/\",\n\nfunction App({ setWindowWidth }) {\n  useEffect(() => {\n    function handleResize() {\n      setWindowWidth(window.innerWidth);\n    }\n    window.addEventListener(\"resize\", handleResize);\n\n    handleResize();\n\n    return (_) => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  });\n\n  return (\n    <div className=\"website-wrapper\">\n      <FloorsScene />\n      <InfoWindow />\n    </div>\n  );\n}\n\nconst mapDispatchToProps = {\n  setWindowWidth\n};\n\nexport default connect(null, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const initialState = {\r\n  clickedFloor: null\r\n};\r\n\r\nconst setClickedFloor = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_CLICKED_FLOOR\":\r\n      return { ...state, clickedFloor: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default setClickedFloor;\r\n","const initialState = {\r\n  clickedRoom: null,\r\n  clickCount: 0\r\n};\r\n\r\nconst setClickedRoom = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_CLICKED_ROOM\":\r\n      return { ...state, clickedRoom: action.payload, clickCount: state.clickCount + 1 };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default setClickedRoom;\r\n","const initialState = {\r\n  windowWidth: 0\r\n};\r\n\r\nconst setWindowWidth = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_WINDOW_WIDTH\":\r\n      return { ...state, windowWidth: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default setWindowWidth;\r\n","import { combineReducers } from \"redux\";\r\nimport setClickedFloor from \"./setClickedFloor\";\r\nimport setClickedRoom from \"./setClickedRoom\";\r\nimport setWindowWidth from \"./setWindowWidth\";\r\n\r\nexport default combineReducers({\r\n  setClickedFloor: setClickedFloor,\r\n  setClickedRoom: setClickedRoom,\r\n  setWindowWidth: setWindowWidth\r\n});\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport reducers from \"./reducers/allReducers\";\n\nconst store = createStore(reducers);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}